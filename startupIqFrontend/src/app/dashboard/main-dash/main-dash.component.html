<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 ">
    <div class="space-y-8">
        <!-- Open the modal using ID.showModal() method -->
        <dialog id="projectDetailsModal" class="modal">
            <div class="modal-box w-11/12 max-w-2xl">
                <!-- Header -->
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold">New Startup Details</h3>
                    <form method="dialog">
                        <button class="btn btn-sm btn-circle btn-ghost">âœ•</button>
                    </form>
                </div>

                <form [formGroup]="projectForm" (submit)="saveDetails()">
                    <section class="space-y-4">
                        <p class="font-medium text-base-content/80">Basic Info</p>

                        <div>
                            <div class="flex items-center gap-2">
                                <i class="bi bi-building text-gray-500"></i>
                                <input placeholder="Company Name" class="input input-bordered w-full"
                                    formControlName="name" />
                            </div>
                            <div class="text-red-500 text-sm mt-1"
                                *ngIf="projectForm.get('name')?.touched && projectForm.get('name')?.invalid">
                                Company Name is required
                            </div>
                        </div>

                        <div>
                            <div class="flex items-center gap-2">
                                <i class="bi bi-diagram-3 text-gray-500"></i>
                                <input placeholder="Industry" class="input input-bordered w-full"
                                    formControlName="industry" />
                            </div>
                            <div class="text-red-500 text-sm mt-1"
                                *ngIf="projectForm.get('industry')?.touched && projectForm.get('industry')?.invalid">
                                Industry is required
                            </div>
                        </div>

                        <div>
                            <div class="flex items-center gap-2">
                                <i class="bi bi-cash-stack text-gray-500"></i>
                                <input placeholder="Funding Stage" class="input input-bordered w-full"
                                    formControlName="fundingStage" />
                            </div>
                            <div class="text-red-500 text-sm mt-1"
                                *ngIf="projectForm.get('fundingStage')?.touched && projectForm.get('fundingStage')?.invalid">
                                Funding Stage is required
                            </div>
                        </div>

                        <div>
                            <div class="flex items-center gap-2">
                                <i class="bi bi-card-text text-gray-500"></i>
                                <input placeholder="Description" class="input input-bordered w-full"
                                    formControlName="tagline" />
                            </div>
                            <div class="text-red-500 text-sm mt-1"
                                *ngIf="projectForm.get('tagline')?.touched && projectForm.get('tagline')?.invalid">
                                Description is required
                            </div>
                        </div>
                    </section>

                    <div class="modal-action mt-6">
                            <button class="btn btn-primary" type="submit" [disabled]="projectForm.invalid">
                                <i class="bi bi-check2-circle mr-2"></i> Save
                            </button>
                    </div>
                </form>
            </div>

            <form method="dialog" class="modal-backdrop">
                <button>close</button>
            </form>
        </dialog>

        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
            <div>
                <p class="text-3xl font-bold">Investment Analysis Dashboard</p>
                <p class="mt-2 text-base-content/70">AI-powered startup evaluation and deal flow management</p>
            </div>
            <div class="flex space-x-3">
                <button type="button"
                    class="btn border-none bg-base-content/2 hover:bg-base-content/6 font-normal text-base text-base-content/80 rounded-lg"><i
                        class="bi bi-funnel mr-1"></i>Analysis Weights</button>
                <button class="btn bg-primary/80 text-base-100 rounded-lg" onclick="projectDetailsModal.showModal()"><i
                        class="bi bi-plus mr-1"></i>Add Project</button>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="rounded-xl p-6 shadow-sm border border-base-content/5 bg-base-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-base-content/70">Total Analyses</p>
                        <p class="text-3xl font-bold">{{filteredProjects.length}}</p>
                    </div>
                    <div class="h-12 w-12 bg-primary/20 rounded-lg flex items-center justify-center">
                        <i class="bi bi-plus text-primary text-3xl"></i>
                    </div>
                </div>
            </div>
            <div class="rounded-xl p-6 shadow-sm border border-base-content/5 bg-base-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-base-content/70">Average Score</p>
                        <p class="text-3xl font-bold">7.6</p>
                    </div>
                    <div class="h-12 w-12 bg-success/20 rounded-lg flex items-center justify-center">
                        <i class="bi bi-graph-up text-success text-xl"></i>
                    </div>
                </div>
            </div>
            <div class="rounded-xl p-6 shadow-sm border border-base-content/5 bg-base-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-base-content/70">High Risk</p>
                        <p class="text-3xl font-bold">6</p>
                    </div>
                    <div class="h-12 w-12 bg-warning/10 rounded-lg flex items-center justify-center">
                        <i class="bi bi-exclamation-triangle text-warning text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0">
            <div class="relative flex-1 max-w-md">
                <label class="input w-full rounded-lg">
                    <svg class="h-[1em] opacity-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <g stroke-linejoin="round" stroke-linecap="round" stroke-width="2.5" fill="none"
                            stroke="currentColor">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.3-4.3"></path>
                        </g>
                    </svg>
                    <input #searchBox type="search" class="grow text-base-content/70" placeholder="Search" (input)="onSearch(searchBox.value)" />
                </label>
            </div>
            <div class="text-sm text-base-content/60">
                <span>{{ filteredProjects.length }} of {{ projects.length }} startups</span>
            </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
            <div *ngFor="let project of filteredProjects">
                <div
                    class="rounded-xl bg-base-100 p-6 shadow-sm border border-base-content/20 transition-all hover:border-base-content/30">
                    <div class="space-y-4">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-base-content/90">{{ project.companyInfo?.name }}
                                </h3>
                                <p class="text-sm text-base-content/60">{{ project.companyInfo?.industry }}<span><i
                                            class="bi bi-dot"></i></span> <span>{{ project.companyInfo?.fundingStage
                                        }}</span></p>
                            </div>
                        </div>
                        <p class="text-sm text-base-content/70 line-clamp-2">{{ project.companyInfo?.tagline }}</p>
                        <div class="flex items-center justify-between">
                            <div></div>
                            <div (click)="goToAnalysis(project.id)" 
                                class="cursor-pointer flex items-center space-x-1 text-primary text-sm font-medium">
                                Start Analysis <i class="bi bi-arrow-right mx-1"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>